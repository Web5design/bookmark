/* http://keith-wood.name/bookmark.html
   Sharing bookmarks for jQuery v1.0.0.
   Written by Keith Wood (kbwood@virginbroadband.com.au) March 2008.
   Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and 
   MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. 
   Please attribute the author if you use it. */
(function($){function Bookmark(){this._defaults={sites:[],icons:'bookmarks.png',target:'_blank',compact:false,addFavorite:false,favoriteText:'Favorite',favoriteIcon:'favorite.png',addEmail:false,emailText:'E-mail',emailIcon:'email.png',emailSubject:'Interesting page',emailBody:'I thought you might find this page interesting:\n{p}',manualBookmark:'Please close this dialog and\npress Ctrl-D to bookmark this page.'};this._sites={'aol':{display:'myAOL',icon:0,url:'http://favorites.my.aol.com/ffclient/webroot/0.4.1/src/html/addBookmarkDialog.html?url={u}&amp;title={t}&amp;favelet=true'},'ask':{display:'Ask',icon:1,url:'http://myjeeves.ask.com/mysearch/BookmarkIt?v=1.2&amp;t=webpages&amp;url={u}&amp;title={t}'},'blinklist':{display:'BlinkList',icon:2,url:'http://www.blinklist.com/index.php?Action=Blink/addblink.php&amp;Url={u}&amp;Title={t}'},'blogmarks':{display:'Blogmarks',icon:3,url:'http://blogmarks.net/my/new.php?mini=1&amp;simple=1&amp;url={u}&amp;title={t}'},'delicious':{display:'del.icio.us',icon:4,url:'http://del.icio.us/post?url={u}&amp;title={t}'},'digg':{display:'Digg',icon:5,url:'http://digg.com/submit?phase=2&amp;url={u}&amp;title={t}'},'diigo':{display:'Diigo',icon:6,url:'http://www.diigo.com/post?url={u}&amp;title={t}'},'facebook':{display:'Facebook',icon:7,url:'http://www.facebook.com/sharer.php?u={u}&amp;t={t}'},'fark':{display:'Fark',icon:8,url:'http://cgi.fark.com/cgi/fark/submit.pl?new_url={u}&amp;new_comment={t}'},'faves':{display:'Faves',icon:9,url:'http://faves.com/Authoring.aspx?u={u}&amp;t={t}'},'feedmelinks':{display:'Feed Me Links',icon:10,url:'http://feedmelinks.com/categorize?from=toolbar&amp;op=submit&amp;url={u}&amp;name={t}'},'furl':{display:'Furl',icon:11,url:'http://www.furl.net/storeIt.jsp?t={t}&amp;u={u}'},'google':{display:'Google',icon:12,url:'http://www.google.com/bookmarks/mark?op=edit&amp;bkmk={u}&amp;title={t}'},'linkagogo':{display:'LinkaGoGo',icon:13,url:'http://www.linkagogo.com/go/AddNoPopup?url={u}&amp;title={t}'},'magnolia':{display:'ma.gnolia',icon:14,url:'http://ma.gnolia.com/bookmarklet/add?url={u}&amp;title={t}'},'misterwong':{display:'Mister Wong',icon:15,url:'http://www.mister-wong.com/index.php?action=addurl&amp;bm_url={u}&amp;bm_description={t}'},'multiply':{display:'Multiply',icon:16,url:'http://multiply.com/gus/journal/compose/addthis?body=&amp;url={u}&amp;subject={t}'},'myspace':{display:'MySpace',icon:17,url:'http://www.myspace.com/Modules/PostTo/Pages/?c={u}&amp;t={t}'},'netscape':{display:'Netscape',icon:18,url:'http://www.netscape.com/submit/?U={u}&amp;T={t}'},'netvouz':{display:'Netvouz',icon:19,url:'http://netvouz.com/action/submitBookmark?url={u}&amp;title={t}&amp;popup=no'},'newsvine':{display:'Newsvine',icon:20,url:'http://www.newsvine.com/_wine/save?popoff=0&amp;u={u}&amp;h={t}'},'reddit':{display:'reddit',icon:21,url:'http://reddit.com/submit?url={u}&amp;title={t}'},'segnalo':{display:'Segnalo',icon:22,url:'http://segnalo.alice.it/post.html.php?url={u}&amp;title={t}'},'simpy':{display:'Simpy',icon:23,url:'http://www.simpy.com/simpy/LinkAdd.do?href={u}&amp;title={t}'},'slashdot':{display:'Slashdot',icon:24,url:'http://slashdot.org/bookmark.pl?url={u}&amp;title={t}'},'stumbleupon':{display:'StumbleUpon',icon:25,url:'http://www.stumbleupon.com/submit?url={u}&amp;title={t}'},'tailrank':{display:'Tailrank',icon:26,url:'http://tailrank.com/share/?title={t}&amp;link_href={u}'},'technorati':{display:'Technorati',icon:27,url:'http://www.technorati.com/faves?add={u}'},'windows':{display:'Windows Live',icon:28,url:'https://favorites.live.com/quickadd.aspx?marklet=1&amp;mkt=en-us&amp;url={u}&amp;title={t}'},'yahoo':{display:'Yahoo MyWeb',icon:29,url:'http://myweb2.search.yahoo.com/myresults/bookmarklet?t={t}&amp;u={u}'}}}$.extend(Bookmark.prototype,{markerClassName:'hasBookmark',setDefaults:function(a){extendRemove(this._defaults,a||{});return this},addSite:function(a,b,c,d){this._sites[a]={display:b,icon:c,url:d};return this},getSites:function(){return this._sites},_attachBookmark:function(a,b){a=$(a);if(a.is('.'+this.markerClassName)){return}a.addClass(this.markerClassName);this._updateBookmark(a,b)},_changeBookmark:function(a,b){a=$(a);if(!a.is('.'+this.markerClassName)){return}this._updateBookmark(a,b)},_updateBookmark:function(e,f){f=extendRemove(extendRemove({},this._defaults),f);var g=f.sites;if(g.length==0){$.each(this._sites,function(a){g[g.length]=a})}var h='<ul class="bookmark_list'+(f.compact?' bookmark_compact':'')+'">';var i=function(a,b,c){var d='<li><a href="'+c+'"'+(f.target?' target="'+f.target+'"':'')+'>';if(b!=null){if(typeof b=='number'){d+='<span title="'+a+'" style="display: inline-block; width: 16px; height: 16px;'+($.browser.mozilla?' padding-left: 16px;':'')+' background: '+'transparent url('+f.icons+') no-repeat -'+(b*16)+'px 0px;"></span>'}else{d+='<img src="'+b+'" alt="'+a+'" title="'+a+'"'+($.browser.safari?' style="margin-top: 2px;"':'')+'/>'}d+=(f.compact?'':'&#xa0;')}d+=(f.compact?'':a)+'</a></li>';return d};if(f.addFavorite){h+='<li><a href="#" onclick="jQuery.bookmark._addFavourite()">'+(f.favoriteIcon?'<img src="'+f.favoriteIcon+'" alt="'+f.favoriteText+'" title="'+f.favoriteText+'"'+($.browser.safari?' style="margin-top: 2px;"':'')+'/>'+(f.compact?'':'&#xa0;'):'')+(f.compact?'':f.favoriteText)+'</li>'}if(f.addEmail){h+=i(f.emailText,f.emailIcon,'mailto:?subject='+escape(f.emailSubject)+'&amp;body='+escape(f.emailBody.replace(/{p}/,document.title+' ('+window.location.href+')')))}var j=this._sites;$.each(g,function(a,b){var c=j[b];h+=i(c.display,c.icon,c.url.replace(/{u}/,escape(window.location.href)).replace(/{t}/,escape(document.title)))});h+='</ul>';e.html(h)},_destroyBookmark:function(a){a=$(a);if(!a.is('.'+this.markerClassName)){return}a.removeClass(this.markerClassName);a.empty()},_addFavourite:function(){if($.browser.msie){window.external.addFavorite(window.location.href,document.title)}else{alert(this._defaults.manualBookmark)}}});function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null){a[c]=null}}return a}$.fn.bookmark=function(a){var b=Array.prototype.slice.call(arguments,1);return this.each(function(){if(typeof a=='string'){$.bookmark['_'+a+'Bookmark'].apply($.bookmark,[this].concat(b))}else{$.bookmark._attachBookmark(this,a||{})}})};$(document).ready(function(){$.bookmark=new Bookmark()})})(jQuery);