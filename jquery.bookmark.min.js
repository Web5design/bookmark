/* http://keith-wood.name/bookmark.html
   Sharing bookmarks for jQuery v1.1.1.
   Written by Keith Wood (kbwood@virginbroadband.com.au) March 2008.
   Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and 
   MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. 
   Please attribute the author if you use it. */
(function($){var m='bookmark';function Bookmark(){this._defaults={sites:[],icons:'bookmarks.png',iconSize:16,target:'_blank',compact:true,popup:false,popupText:'Bookmark this site...',addFavorite:false,favoriteText:'Favorite',favoriteIcon:0,addEmail:false,emailText:'E-mail',emailIcon:1,emailSubject:'Interesting page',emailBody:'I thought you might find this page interesting:\n{t} ({u})',manualBookmark:'Please close this dialog and\npress Ctrl-D to bookmark this page.'};this._sites={'alltagz':{display:'alltagz',icon:69,url:'http://www.alltagz.de/bookmarks/?action=add&address={u}&amp;title={t}'},'aol':{display:'myAOL',icon:2,url:'http://favorites.my.aol.com/ffclient/webroot/0.4.1/src/html/addBookmarkDialog.html?url={u}&amp;title={t}&amp;favelet=true'},'ask':{display:'Ask',icon:3,url:'http://myjeeves.ask.com/mysearch/BookmarkIt?v=1.2&amp;t=webpages&amp;url={u}&amp;title={t}'},'backflip':{display:'Backflip',icon:62,url:'http://www.backflip.com/add_page_pop.ihtml?url={u}&amp;title={t}'},'ballhype':{display:'BallHype',icon:63,url:'http://ballhype.com/post/url/?url={u}&amp;title={t}'},'bebo':{display:'Bebo',icon:64,url:'http://bebo.com/c/share?Url={u}&amp;Title={t}'},'blinklist':{display:'BlinkList',icon:4,url:'http://www.blinklist.com/index.php?Action=Blink/addblink.php&amp;Url={u}&amp;Title={t}'},'bloglines':{display:'Bloglines',icon:48,url:'http://www.bloglines.com/citations?url={u}'},'blogmarks':{display:'Blogmarks',icon:5,url:'http://blogmarks.net/my/new.php?mini=1&amp;simple=1&amp;url={u}&amp;title={t}'},'care2':{display:'Care2',icon:6,url:'http://www.care2.com/news/news_post.html?url={u}&amp;title={t}'},'current':{display:'Current',icon:49,url:'http://current.com/clipper.htm?url={u}&amp;title={t}'},'delicious':{display:'del.icio.us',icon:7,url:'http://del.icio.us/post?url={u}&amp;title={t}'},'designfloat':{display:'Design Float',icon:50,url:'http://www.designfloat.com/submit.php?url={u}&amp;title={t}'},'digg':{display:'Digg',icon:8,url:'http://digg.com/submit?phase=2&amp;url={u}&amp;title={t}'},'diigo':{display:'Diigo',icon:9,url:'http://www.diigo.com/post?url={u}&amp;title={t}'},'dzone':{display:'DZone',icon:10,url:'http://www.dzone.com/links/add.html?url={u}&amp;title={t}'},'facebook':{display:'Facebook',icon:11,url:'http://www.facebook.com/sharer.php?u={u}&amp;t={t}'},'fark':{display:'Fark',icon:12,url:'http://cgi.fark.com/cgi/fark/submit.pl?new_url={u}&amp;new_comment={t}'},'faves':{display:'Faves',icon:13,url:'http://faves.com/Authoring.aspx?u={u}&amp;t={t}'},'feedmelinks':{display:'Feed Me Links',icon:14,url:'http://feedmelinks.com/categorize?from=toolbar&amp;op=submit&amp;url={u}&amp;name={t}'},'fresqui':{display:'Fresqui',icon:51,url:'http://ocio.fresqui.com/post?url={u}&amp;title={t}'},'friendfeed':{display:'FriendFeed',icon:52,url:'http://friendfeed.com/share?url={u}&amp;title={t}'},'funp':{display:'funP',icon:53,url:'http://funp.com/pages/submit/add.php?title={t}&amp;url={u}'},'furl':{display:'Furl',icon:15,url:'http://www.furl.net/storeIt.jsp?t={t}&amp;u={u}'},'google':{display:'Google',icon:16,url:'http://www.google.com/bookmarks/mark?op=edit&amp;bkmk={u}&amp;title={t}'},'hugg':{display:'Hugg',icon:17,url:'http://www.hugg.com/submit?url={u}'},'kaboodle':{display:'Kaboodle',icon:65,url:'http://www.kaboodle.com/grab/addItemWithUrl?url={u}&amp;pidOrRid=pid=&amp;redirectToKPage=true'},'kirtsy':{display:'Kirtsy',icon:54,url:'http://www.kirtsy.com/submit.php?url={u}'},'kool':{display:'Koolontheweb',icon:43,url:'http://www.koolontheweb.com/post?url={u}&title={t}'},'linkarena':{display:'Linkarena',icon:70,url:'http://linkarena.com/bookmarks/addlink/?url={u}&amp;title={t}&amp;desc=&amp;tags='},'linkagogo':{display:'LinkaGoGo',icon:18,url:'http://www.linkagogo.com/go/AddNoPopup?url={u}&amp;title={t}'},'linkedin':{display:'LinkedIn',icon:66,url:'http://www.linkedin.com/shareArticle?mini=true&amp;url={u}&amp;title={t}&amp;ro=false&amp;summary=&amp;source='},'livejournal':{display:'LiveJournal',icon:19,url:'http://www.livejournal.com/update.bml?subject={u}'},'magnolia':{display:'ma.gnolia',icon:20,url:'http://ma.gnolia.com/bookmarklet/add?url={u}&amp;title={t}'},'meneame':{display:'menéame',icon:55,url:'http://meneame.net/submit.php?url={u}'},'mindbody':{display:'MindBodyGreen',icon:21,url:'http://www.mindbodygreen.com/passvote.action?u={u}'},'misterwong':{display:'Mister Wong',icon:22,url:'http://www.mister-wong.com/index.php?action=addurl&amp;bm_url={u}&amp;bm_description={t}'},'mixx':{display:'Mixx',icon:23,url:'http://www.mixx.com/submit/story?page_url={u}&amp;title={t}'},'multiply':{display:'Multiply',icon:24,url:'http://multiply.com/gus/journal/compose/addthis?body=&amp;url={u}&amp;subject={t}'},'myspace':{display:'MySpace',icon:25,url:'http://www.myspace.com/Modules/PostTo/Pages/?c={u}&amp;t={t}'},'n4g':{display:'N4G',icon:56,url:'http://www.n4g.com/tips.aspx?url={u}&amp;title={t}'},'netscape':{display:'Netscape',icon:26,url:'http://www.netscape.com/submit/?U={u}&amp;T={t}'},'netvouz':{display:'Netvouz',icon:27,url:'http://netvouz.com/action/submitBookmark?url={u}&amp;title={t}&amp;popup=no'},'newsvine':{display:'Newsvine',icon:28,url:'http://www.newsvine.com/_wine/save?u={u}&amp;h={t}'},'nowpublic':{display:'NowPublic',icon:29,url:'http://view.nowpublic.com/?src={u}&amp;t={t}'},'oknotizie':{display:'OKNOtizie',icon:57,url:'http://oknotizie.alice.it/post?url={u}&amp;title={t}'},'propeller':{display:'Propeller',icon:58,url:'http://www.propeller.com/submit/?U={u}&amp;T={t}'},'reddit':{display:'reddit',icon:30,url:'http://reddit.com/submit?url={u}&amp;title={t}'},'scoopeo':{display:'Scoopeo',icon:46,url:'http://www.scoopeo.com/scoop/new?newurl={u}&amp;title={t}'},'segnalo':{display:'Segnalo',icon:31,url:'http://segnalo.alice.it/post.html.php?url={u}&amp;title={t}'},'simpy':{display:'Simpy',icon:32,url:'http://www.simpy.com/simpy/LinkAdd.do?href={u}&amp;title={t}'},'slashdot':{display:'Slashdot',icon:33,url:'http://slashdot.org/bookmark.pl?url={u}&amp;title={t}'},'smarking':{display:'Smarking',icon:34,url:'http://smarking.com/editbookmark/?url={u}&amp;title={t}'},'sphinn':{display:'Sphinn',icon:44,url:'http://sphinn.com/submit.php?url={u}&amp;title={t}'},'spurl':{display:'Spurl',icon:35,url:'http://www.spurl.net/spurl.php?url={u}&amp;title={t}'},'squidoo':{display:'Squidoo',icon:42,url:'http://www.squidoo.com/lensmaster/bookmark?{u}&title={t}'},'stumbleupon':{display:'StumbleUpon',icon:36,url:'http://www.stumbleupon.com/submit?url={u}&amp;title={t}'},'tailrank':{display:'Tailrank',icon:37,url:'http://tailrank.com/share/?title={t}&amp;link_href={u}'},'technorati':{display:'Technorati',icon:38,url:'http://www.technorati.com/faves?add={u}'},'thisnext':{display:'ThisNext',icon:39,url:'http://www.thisnext.com/pick/new/submit/sociable/?url={u}&amp;name={t}'},'twitthis':{display:'TwitThis',icon:45,url:'http://twitthis.com/twit?url={u}'},'wikio':{display:'Wikio',icon:47,url:'http://www.wikio.com/vote?newurl={u}'},'windows':{display:'Windows Live',icon:40,url:'https://favorites.live.com/quickadd.aspx?marklet=1&amp;mkt=en-us&amp;url={u}&amp;title={t}'},'xanga':{display:'Xanga',icon:59,url:'http://www.xanga.com/private/editorx.aspx?t={t}&amp;u={u}'},'yahoobm':{display:'Yahoo Bookmarks',icon:60,url:'http://bookmarks.yahoo.com/toolbar/savebm?opener=tb&amp;u={u}&t={t}'},'yahoobuzz':{display:'Yahoo Buzz',icon:67,url:'http://buzz.yahoo.com/submit?submitUrl={u}&amp;submitHeadline={t}'},'yahoo':{display:'Yahoo MyWeb',icon:41,url:'http://myweb2.search.yahoo.com/myresults/bookmarklet?t={t}&amp;u={u}'},'yardbarker':{display:'Yardbarker',icon:68,url:'http://www.yardbarker.com/author/new/?pUrl={u}'},'yigg':{display:'Yigg',icon:61,url:'http://www.yigg.de/neu?exturl={u}&amp;exttitle={t}'}}}$.extend(Bookmark.prototype,{markerClassName:'hasBookmark',setDefaults:function(a){extendRemove(this._defaults,a||{});return this},addSite:function(a,b,c,d){this._sites[a]={display:b,icon:c,url:d};return this},getSites:function(){return this._sites},_attachBookmark:function(a,b){a=$(a);if(a.hasClass(this.markerClassName)){return}a.addClass(this.markerClassName);this._updateBookmark(a,b)},_changeBookmark:function(a,b){a=$(a);if(!a.hasClass(this.markerClassName)){return}this._updateBookmark(a,b)},_updateBookmark:function(f,g){var h=$.data(f[0],m)||$.extend({},this._defaults);g=extendRemove(h,g||{});$.data(f[0],m,g);var i=g.sites;if(i.length==0){$.each(this._sites,function(a){i.push(a)})}var j=(g.popup?'<span class="bookmark_popup_text">'+g.popupText+'</span><div class="bookmark_popup">':'')+'<ul class="bookmark_list'+(g.compact?' bookmark_compact':'')+'">';var k=function(a,b,c,d){var e='<li><a href="'+c+'"'+(d?' onclick="'+d+'"':(g.target?' target="'+g.target+'"':''))+'>';if(b!=null){if(typeof b=='number'){e+='<span title="'+a+'" style="background: '+'transparent url('+g.icons+') no-repeat -'+(b*g.iconSize)+'px 0px;'+($.browser.mozilla&&$.browser.version<'1.9'?' padding-left: '+g.iconSize+'px; padding-bottom: '+Math.max(0,(g.iconSize/2)-5)+'px;':'')+'"></span>'}else{e+='<img src="'+b+'" alt="'+a+'" title="'+a+'"'+(($.browser.mozilla&&$.browser.version<'1.9')||($.browser.msie&&$.browser.version<'7.0')?' style="vertical-align: bottom;"':($.browser.msie?' style="vertical-align: middle;"':($.browser.opera||$.browser.safari?' style="vertical-align: baseline;"':'')))+'/>'}e+=(g.compact?'':'&#xa0;')}e+=(g.compact?'':a)+'</a></li>';return e};if(g.addFavorite){j+=k(g.favoriteText,g.favoriteIcon,'#','jQuery.bookmark._addFavourite()')}if(g.addEmail){j+=k(g.emailText,g.emailIcon,'mailto:?subject='+escape(g.emailSubject)+'&amp;body='+escape(g.emailBody.replace(/{u}/,window.location.href).replace(/{t}/,document.title)))}var l=this._sites;$.each(i,function(a,b){var c=l[b];if(c){j+=k(c.display,c.icon,c.url.replace(/{u}/,escape(window.location.href)).replace(/{t}/,escape(document.title)))}});j+='</ul>'+(g.popup?'</div>':'');f.html(j);if(g.popup){$(f).click(function(){var a=$(this);var b=a.offset();var c=$.bookmark._getExtras(a);$('.bookmark_popup',a).css('left',b.left).css('top',b.top+a.height()+c[1]).toggle()})}},_getExtras:function(b){var c=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseInt(c(b.css('border-left-width')),10)+parseInt(c(b.css('border-right-width')),10)+parseInt(b.css('padding-left'),10)+parseInt(b.css('padding-right'),10),parseInt(c(b.css('border-top-width')),10)+parseInt(c(b.css('border-bottom-width')),10)+parseInt(b.css('padding-top'),10)+parseInt(b.css('padding-bottom'),10)]},_destroyBookmark:function(a){a=$(a);if(!a.hasClass(this.markerClassName)){return}a.removeClass(this.markerClassName).empty();$.removeData(a[0],m)},_addFavourite:function(){if($.browser.msie){window.external.addFavorite(window.location.href,document.title)}else{alert(this._defaults.manualBookmark)}}});function extendRemove(a,b){$.extend(a,b);for(var c in b){if(b[c]==null){a[c]=null}}return a}$.fn.bookmark=function(a){var b=Array.prototype.slice.call(arguments,1);return this.each(function(){if(typeof a=='string'){$.bookmark['_'+a+'Bookmark'].apply($.bookmark,[this].concat(b))}else{$.bookmark._attachBookmark(this,a||{})}})};$.bookmark=new Bookmark()})(jQuery);